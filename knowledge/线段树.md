---
熟练度:
  - t1
  
---
## 介绍

线段树，就是用线段组成的树，即每个节点表示的数为 $[l,r]$ 区间内 $l\ \oplus\ l+1\ \oplus \ \dots \ \oplus\ r-1\ \oplus\ r$
的值 （其中 $\oplus$ 为任意满足结合律的运算符）

## 存储方式

若节点 $n$ 表示的区间为 $[l,r]$，则节点 $2n$ （左孩子）表示的区间为 $[l,m]$，节点 $2n+1$（右孩子） 表示的区间为 $[m+1,r]$

```mermaid
graph TB

A["[1,5] ​ ​  ​ v[1]=18"]
B["[1,3] ​ ​  ​​ v[2]=7"]
C["[4,5] ​ ​  ​​ v[3]=11"]
D["[1,2] ​ ​  ​​ v[4]=3"]
E["[3,3] ​ ​  ​​ v[5]=4"]
F["[4,4] ​ ​  ​​ v[6]=7"]
G["[5,5] ​ ​  ​​ v[7]=4"]
H["[1,1] ​ ​  ​​ v[8]=2"]
I["[2,2] ​ ​  ​​ v[9]=1"]

A-->B
A-->C
B-->D
B-->E
C-->F
C-->G
D-->H
D-->I
```


```mermaid
---
displayMode: compact
---
gantt
	axisFormat %y
	title 一个线段树
	[1,5] ​ ​ ​ ​v[1]=18:active,2000-1-1, 5y
	[1,3] ​ ​ ​ ​v[2]=7 :active,2000-1-1, 3y
	[4,5] ​ ​ ​ ​v[3]=11:active,2003-1-1, 2y
	[1,2] ​ ​ ​ ​v[4]=3 :active,2000-1-1, 2y
	[3,3] ​ ​ ​ ​v[5]=4 :active,2002-1-1, 1y
	[4,4] ​ ​ ​ ​v[6]=7 :active,2003-1-1, 1y
	[5,5] ​ ​ ​ ​v[7]=4 :active,2004-1-1, 1y
	[1,1] ​ ​ ​ ​v[8]=2 :active,2000-1-1, 1y
	[2,2] ​ ​ ​ ​v[9]=1 :active,2001-1-1, 1y
```


































