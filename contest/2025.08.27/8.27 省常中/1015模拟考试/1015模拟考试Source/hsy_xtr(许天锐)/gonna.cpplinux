#include<bits/stdc++.h>
#define ll long long
using namespace std;
int n,p;
int prime[20501],b[20501],cnt;
vector<pair<int,int> >ys[20501];
inline int qpow(ll x,int k){
	ll ans=1;
	while(k){
		if(k&1)ans=(ans*x)%p;
		x=(x*x)%p;
		k>>=1;
	}
	return ans;
}
vector<int>mi[2300];
int lth[2300]={0,219140,167308,101565,88039,67218,57674,57730,40394,43020,37998,37802,37802,36522,36542,39332,38950,34512,36902,35642,30032,31754,37208,27390,31506,37442,20302,21116,22792,23654,25426,32132,34192,37402,38504,19834,19802,19814,19766,19756,19782,19760,19802,19762,19778,19798,19802,19742,19760,19890,19838,19722,19756,19682,19752,19714,19914,19834,19712,19874,19882,19742,19858,19892,19842,19658,19910,19802,19826,19724,19838,19714,19692,19766,19718,19658,19866,19790,19802,19602,19586,19648,19742,19782,19874,19712,19892,19714,19610,19782,19868,19574,19600,19928,19602,19922,19580,19814,19762,19838,19442,19658,19462,19672,19882,19952,19586,19926,19538,19736,19802,19394,19586,19714,19778,19532,19842,19904,19382,19562,19742,19802,19490,19606,19780,19322,19602,19826,19388,19604,19766,19928,19294,19502,19658,19762,19970,19302,19652,19902,19394,19442,19682,19730,19826,19874,19276,19598,19690,19736,19828,19274,19362,19406,19494,19934,19112,19280,19490,19658,19742,19868,19042,19322,19402,19522,19642,19802,19922,19154,19230,19344,19382,19572,19610,19724,19914,19952,19082,19118,19226,19550,19622,19658,19730,19838,19946,18974,19076,19178,19552,19586,19756,19892,18882,18978,19074,19202,19394,19458,19554,19650,19682,19778,19970,18872,19142,19172,19232,19322,19352,19442,19502,19532,19592,19772,19802,19892,19042,19126,19210,19322,19574,19714,19910,19966,18566,18618,18696,18800,18852,18878,18956,19112,19242,19268,19320,19346,19398,19476,19632,19788,19892,18506,18578,18626,18698,18794,18842,18938,18986,19154,19202,19274,19298,19346,19418,19442,19514,19634,19874,19946,18328,18350,18614,18658,18680,18790,18922,18944,19054,19142,19208,19274,19340,19538,19604,19648,19670,19802,19912,18222,18302,18462,18602,18662,18702,18722,18762,18782,18882,19002,19062,19122,19302,19322,19482,19502,19722,19782,19862,19922,19962,19982,18020,18092,18146,18236,18254,18344,18470,18560,18614,18722,18740,18776,18794,18884,18992,19010,19154,19172,19226,19262,19280,19370,19442,19604,19820,19856,19910,19982,17890,17906,17938,18002,18130,18146,18178,18242,18290,18338,18370,18466,18482,18658,18706,18722,18770,18802,18850,18962,19010,19042,19058,19106,19138,19186,19282,19330,19378,19490,19522,19570,19666,19730,19778,19810,17516,17642,17712,17768,17796,17838,17852,17894,18048,18132,18146,18258,18314,18342,18426,18524,18594,18608,18636,18692,18734,18776,18804,18818,18846,18888,18944,18972,18986,19028,19098,19112,19182,19238,19266,19364,19434,19518,19532,19574,19602,19616,19728,19826,19854,19896,19952,19994,17162,17270,17318,17378,17414,17450,17498,17558,17630,17714,17738,17774,17810,17822,17990,18002,18062,18110,18134,18218,18242,18290,18362,18398,18470,18494,18530,18650,18710,18722,18818,18974,18998,19010,19082,19118,19142,19214,19250,19298,19322,19370,19502,19514,19538,19550,19622,19790,19802,19838,19874,19910,19934,19970,19982,16712,16732,16792,16802,16852,16862,16942,16952,17032,17062,17162,17242,17282,17302,17312,17332,17342,17452,17492,17552,17582,17632,17642,17662,17692,17702,17732,17782,17792,17852,17902,17912,17962,18032,18062,18082,18112,18152,18182,18212,18292,18352,18362,18382,18452,18482,18502,18542,18592,18632,18662,18692,18802,18832,18842,18892,18962,18982,19012,19102,19112,19162,19232,19252,19262,19312,19382,19402,19442,19532,19552,19582,19592,19612,19642,19652,19712,19732,19832,19942,16002,16010,16026,16050,16074,16082,16106,16194,16202,16226,16290,16314,16362,16370,16394,16442,16506,16514,16530,16554,16610,16626,16634,16706,16802,16842,16866,16874,16914,16922,16962,16970,17010,17034,17042,17082,17090,17130,17154,17186,17306,17346,17354,17394,17426,17450,17490,17562,17586,17634,17682,17690,17762,17786,17802,17826,17850,17922,17930,17970,18026,18050,18066,18074,18090,18186,18194,18242,18266,18330,18362,18386,18410,18482,18546,18554,18570,18594,18602,18626,18650,18690,18714,18762,18810,18882,18890,18914,18930,19002,19034,19130,19146,19154,19170,19194,19202,19250,19266,19322,19442,19482,19506,19554,19610,19634,19674,19722,19730,19746,19770,19802,19826,19866,19874,19890,19946,19970,19994,15008,15026,15032,15062,15068,15116,15152,15176,15230,15242,15260,15296,15302,15320,15338,15356,15440,15458,15500,15512,15536,15566,15590,15626,15680,15692,15698,15710,15782,15818,15836,15842,15890,15908,15926,15968,15998,16040,16052,16142,16160,16178,16196,16220,16238,16250,16256,16292,16310,16322,16328,16346,16412,16430,16436,16448,16502,16508,16520,16556,16562,16580,16592,16670,16688,16706,16718,16742,16772,16868,16916,16922,16940,16952,16958,16970,16976,17006,17048,17066,17078,17102,17132,17150,17210,17222,17228,17246,17336,17348,17372,17402,17420,17438,17462,17480,17516,17528,17546,17552,17570,17582,17600,17606,17636,17642,17690,17708,17768,17780,17816,17858,17942,17960,18020,18032,18086,18110,18128,18140,18158,18200,18218,18236,18266,18272,18302,18338,18362,18392,18398,18428,18452,18488,18518,18590,18596,18608,18632,18650,18662,18686,18740,18770,18788,18806,18812,18830,18860,18896,18902,18932,18950,18968,18986,19010,19028,19058,19076,19082,19100,19118,19136,19166,19190,19262,19280,19346,19352,19406,19418,19442,19472,19562,19586,19640,19652,19658,19688,19706,19712,19730,19742,19796,19820,19856,19910,19958,19976,19982,13346,13358,13378,13382,13402,13406,13418,13438,13466,13474,13522,13526,13558,13562,13582,13586,13606,13646,13654,13658,13666,13682,13714,13726,13738,13742,13766,13798,13814,13822,13834,13894,13898,13918,13922,13934,13942,13954,13966,13982,13994,14002,14026,14038,14054,14078,14086,14114,14138,14158,14206,14218,14242,14254,14258,14302,14318,14354,14374,14386,14414,14422,14426,14438,14458,14474,14486,14494,14506,14566,14594,14614,14618,14642,14662,14666,14698,14702,14738,14786,14822,14834,14866,14902,14914,14918,14954,14962,14974,14978,14998,15014,15034,15046,15058,15074,15082,15094,15098,15118,15122,15146,15154,15166,15178,15182,15206,15214,15242,15278,15286,15298,15338,15346,15362,15374,15382,15398,15406,15434,15446,15454,15482,15506,15514,15518,15578,15586,15634,15646,15658,15682,15706,15734,15746,15754,15758,15766,15802,15814,15838,15854,15866,15874,15898,15902,15926,15986,16018,16022,16034,16078,16106,16118,16138,16162,16174,16178,16186,16202,16222,16234,16246,16294,16322,16334,16342,16358,16382,16418,16438,16442,16462,16466,16474,16486,16526,16538,16546,16574,16582,16586,16594,16622,16634,16658,16706,16726,16738,16754,16774,16778,16838,16846,16858,16862,16886,16894,16922,16934,17002,17026,17042,17054,17074,17078,17086,17126,17146,17162,17194,17198,17218,17246,17254,17258,17282,17294,17326,17338,17354,17362,17378,17386,17398,17414,17426,17438,17462,17474,17482,17494,17506,17522,17558,17566,17606,17614,17638,17642,17662,17674,17678,17698,17722,17726,17734,17774,17786,17846,17858,17866,17882,17902,17926,17938,17942,17998,18002,18014,18022,18026,18058,18082,18086,18098,18118,18134,18182,18206,18218,18254,18266,18274,18302,18314,18322,18346,18362,18374,18398,18406,18418,18442,18454,18478,18482,18514,18554,18562,18566,18586,18622,18638,18646,18674,18682,18686,18698,18742,18754,18782,18794,18806,18826,18838,18842,18862,18866,18874,18878,18922,18926,18934,18946,18958,18982,18994,19022,19042,19066,19078,19094,19102,19174,19202,19226,19238,19246,19258,19262,19286,19298,19322,19354,19358,19378,19394,19438,19442,19466,19478,19486,19498,19534,19538,19562,19574,19582,19606,19622,19634,19658,19666,19678,19702,19714,19718,19742,19766,19774,19802,19814,19846,19858,19862,19882,19898,19934,19946,10008,10010,10038,10040,10062,10068,10070,10080,10092,10094,10100,10104,10112,10134,10140,10142,10152,10160,10164,10170,10178,10182,10194,10212,10224,10244,10248,10254,10260,10268,10272,10274,10290,10302,10304,10314,10322,10332,10334,10338,10344,10358,10370,10392,10400,10428,10430,10434,10454,10458,10460,10464,10478,10488,10500,10502,10514,10530,10532,10560,10568,10590,10598,10602,10608,10614,10628,10632,10640,10652,10658,10664,10668,10688,10692,10710,10712,10724,10730,10734,10740,10754,10772,10782,10790,10800,10832,10838,10848,10854,10860,10862,10868,10884,10890,10892,10904,10910,10938,10940,10950,10958,10974,10980,10988,10994,11004,11028,11048,11058,11060,11070,11072,11084,11088,11094,11114,11118,11120,11132,11150,11160,11162,11172,11174,11178,11198,11214,11240,11244,11252,11258,11262,11274,11280,11288,11300,11312,11318,11322,11330,11352,11354,11370,11384,11394,11400,11412,11424,11438,11444,11448,11468,11472,11484,11490,11492,11498,11504,11520,11528,11550,11552,11580,11588,11594,11598,11618,11622,11634,11658,11678,11682,11690,11700,11702,11718,11720,11732,11744,11778,11780,11784,11790,11802,11808,11814,11822,11828,11832,11834,11840,11864,11868,11888,11898,11904,11910,11924,11928,11934,11940,11942,11954,11960,11970,11972,11982,11988,12008,12012,12038,12042,12044,12050,12072,12074,12098,12102,12108,12110,12114,12120,12144,12150,12158,12162,12164,12198,12204,12212,12228,12240,12242,12252,12254,12264,12270,12278,12282,12290,12302,12324,12330,12344,12348,12374,12378,12380,12392,12402,12410,12414,12422,12434,12438,12452,12458,12474,12480,12488,12492,12498,12504,12512,12518,12528,12540,12542,12548,12554,12570,12578,12584,12590,12602,12612,12614,12620,12638,12642,12648,12654,12660,12672,12690,12698,12704,12714,12722,12740,12744,12758,12764,12782,12792,12800,12810,12822,12824,12830,12842,12854,12890,12894,12900,12908,12912,12918,12920,12924,12942,12954,12960,12968,12974,12980,12984,13002,13004,13008,13010,13034,13038,13044,13050,13064,13094,13100,13104,13110,13122,13128,13148,13152,13160,13164,13172,13178,13184,13188,13218,13220,13230,13242,13250,13260,13268,13292,13298,13310,13314,13328,13332,13338,13340,13368,13382,13398,13400,13412,13418,13422,13442,13452,13458,13464,13470,13478,13488,13500,13514,13524,13538,13554,13568,13578,13592,13598,13614,13620,13628,13634,13650,13670,13680,13682,13688,13692,13694,13698,13710,13712,13722,13724,13730,13752,13758,13760,13764,13782,13790,13800,13808,13830,13832,13842,13860,13874,13878,13880,13884,13902,13904,13908,13914,13922,13932,13934,13964,13968,13998,14000,14010,14012,14030,14034,14052,14058,14072,14082,14084,14088,14108,14144,14150,14154,14160,14174,14178,14198,14208,14222,14244,14250,14252,14282,14294,14304,14322,14324,14328,14342,14348,14370,14388,14390,14402,14408,14412,14420,14424,14432,14438,14448,14450,14462,14480,14490,14504,14520,14534,14538,14544,14550,14552,14558,14562,14564,14592,14594,14622,14628,14630,14634,14640,14654,14658,14670,14684,14700,14714,14718,14724,14732,14738,14742,14748,14754,14760,14768,14772,14780,14784,14798,14814,14822,14828,14832,14844,14852,14868,14870,14880,14888,14892,14898,14924,14930,14940,14948,14952,14958,14970,14984,15014,15018,15032,15054,15062,15074,15078,15084,15092,15102,15108,15122,15132,15138,15140,15150,15162,15174,15188,15194,15200,15218,15228,15234,15242,15260,15264,15270,15272,15278,15288,15290,15300,15308,15314,15320,15330,15332,15350,15360,15362,15374,15378,15384,15392,15402,15414,15428,15440,15444,15452,15462,15468,15474,15494,15498,15512,15528,15542,15552,15560,15570,15582,15584,15602,15608,15620,15630,15642,15644,15648,15650,15662,15668,15672,15680,15684,15728,15732,15734,15738,15740,15750,15762,15768,15774,15788,15792,15798,15804,15810,15818,15824,15860,15878,15882,15888,15890,15902,15908,15914,15920,15924,15938,15960,15972,15974,15992,16002,16008,16034,16058,16062,16064,16068,16070,16074,16088,16092,16098,16104,16112,16128,16140,16142,16184,16188,16190,16194,16218,16224,16230,16232,16250,16254,16268,16274,16302,16320,16334,16340,16350,16362,16364,16370,16382,16412,16418,16422,16428,16434,16448,16452,16454,16478,16482,16488,16494,16520,16530,16548,16554,16562,16568,16574,16604,16608,16620,16632,16634,16650,16652,16658,16662,16674,16692,16694,16700,16704,16730,16742,16748,16760,16764,16788,16812,16824,16830,16832,16844,16872,16880,16884,16890,16902,16904,16922,16928,16932,16938,16944,16964,16980,16982,16988,16994,17012,17022,17028,17030,17034,17042,17048,17054,17078,17094,17100,17108,17118,17124,17138,17160,17168,17184,17190,17192,17204,17208,17210,17232,17240,17258,17292,17294,17300,17318,17322,17328,17334,17342,17352,17360,17378,17384,17388,17390,17394,17402,17418,17420,17432,17444,17450,17468,17472,17478,17484,17490,17492,17498,17510,17520,17540,17552,17570,17574,17580,17582,17598,17600,17610,17624,17628,17658,17660,17670,17682,17684,17708,17714,17730,17738,17748,17750,17762,17784,17790,17792,17808,17828,17838,17840,17852,17864,17882,17892,17904,17910,17912,17922,17924,17930,17940,17958,17960,17972,17978,17982,17988,17990,18014,18042,18044,18048,18050,18060,18062,18078,18090,18098,18120,18122,18128,18132,18134,18144,18150,18170,18182,18192,18200,18212,18218,18224,18230,18234,18252,18254,18258,18270,18288,18290,18302,18308,18312,18314,18330,18342,18354,18368,18372,18380,18398,18402,18414,18428,18434,18440,18444,18452,18458,18462,18482,18494,18504,18518,18522,18524,18540,18542,18554,18584,18588,18594,18618,18638,18662,18672,18680,18692,18702,18714,18720,18732,18744,18750,18758,18774,18788,18794,18798,18804,18840,18860,18870,18900,18912,18914,18918,18920,18948,18960,18974,18980,19002,19010,19014,19032,19038,19052,19070,19074,19080,19082,19088,19122,19140,19142,19158,19164,19182,19184,19208,19212,19214,19220,19232,19238,19250,19260,19268,19274,19290,19302,19310,19320,19334,19374,19380,19382,19388,19392,19404,19418,19422,19424,19428,19430,19434,19442,19448,19458,19464,19470,19472,19478,19484,19490,19502,19508,19532,19542,19544,19554,19560,19572,19578,19584,19598,19604,19610,19662,19682,19688,19698,19700,19710,19718,19728,19740,19752,19754,19760,19764,19778,19794,19802,19814,19820,19842,19844,19854,19862,19868,19890,19892,19914,19920,19928,19938,19950,19962,19964,19974,19980,19992,19994,19998};
void init(){
	for(int i=2;i<=n;i++){
		if(!b[i])prime[++cnt]=i;
		for(int j=1;j<=cnt&&prime[j]*i<=n;j++){
			b[i*prime[j]]=1;
			if(i%prime[j]==0)break;
		}
	}
	for(int i=2;i<=n;i++){
		int x=i;
		for(int j=1;j<=cnt;j++){
			if(x%prime[j]==0){
				int tot=0;
				while(x%prime[j]==0)tot++,x/=prime[j];
				ys[i].push_back(make_pair(j,tot));
			}
		}
	}
	for(int i=1;i<=cnt;i++){
		mi[i].push_back(1);
		ll now=1;
		for(int j=1;j<lth[i];j++)now=(now*prime[i])%p,mi[i].push_back((mi[i][j-1]+now)%p);
	}
}
int maxn[2300],tmp[2300],jian[2300];
inline int work(int x,int k){
	return mi[x][k];
}
inline int solve(int x){
	int i;
	for(i=1;i<=cnt;i++){
		jian[i]+=tmp[i]*2;
	}
	for(i=0;i<ys[x].size();i++){
		tmp[ys[x][i].first]+=ys[x][i].second;
	}
	ll ans=1;
	for(i=1;i<=cnt;i++){
		if(tmp[i]*(x-1)-jian[i])ans=(ans*work(i,tmp[i]*(x-1)-jian[i]))%p;
	}
	return (ans+p)%p;
}
int main(){
	freopen("gonna.in","r",stdin);
	freopen("gonna.out","w",stdout);
	cin>>n>>p;
	init();
	if(n==1){
		cout<<1<<endl;
		return 0;
	}
	else if(n==2){
		cout<<3<<endl;
		return 0;
	}
	ll ans=4;
	tmp[1]=1;
	for(int i=3;i<=n;i++){
		ans=(ans+solve(i))%p;
	}
	cout<<ans<<endl;
	return 0;
}