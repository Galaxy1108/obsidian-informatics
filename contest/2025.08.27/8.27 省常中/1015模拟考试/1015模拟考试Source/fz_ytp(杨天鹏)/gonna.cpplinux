#pragma GCC optimize(2)
#include<bits/stdc++.h>
using namespace std;
inline int read(){
    int ans=0,a=getchar();
    while('0'>a||a>'9')a=getchar();
    while('0'<=a&&a<='9')ans=ans*10+a-'0',a=getchar();
    return ans;
}
int n,p;
int len[]={0,219138,386444,488007,576044,643260,700932,758660,799052,842070,880066,917866,955666,992186,1028726,1068056,1107004,1141514,1178414,1214054,1244084,1275836,1313042,1340430,1371934,1409374,1429674,1450788,1473578,1497230,1522654,1554784,1588974,1626374,1664876,1684708,1704508,1724320,1744084,1763838,1783618,1803376,1823176,1842936,1862712,1882508,1902308,1922048,1941806,1961694,1981530,2001250,2021004,2040684,2060434,2080146,2100058,2119890,2139600,2159472,2179352,2199092,2218948,2238838,2258678,2278334,2298242,2318042,2337866,2357588,2377424,2397136,2416826,2436590,2456306,2475962,2495826,2515614,2535414,2555014,2574598,2594244,2613984,2633764,2653636,2673346,2693236,2712948,2732556,2752336,2772202,2791774,2811372,2831298,2850898,2870818,2890396,2910208,2929968,2949804,2969244,2988900,3008360,3028030,3047910,3067860,3087444,3107368,3126904,3146638,3166438,3185830,3205414,3225126,3244902,3264432,3284272,3304174,3323554,3343114,3362854,3382654,3402142,3421746,3441524,3460844,3480444,3500268,3519654,3539256,3559020,3578946,3598238,3617738,3637394,3657154,3677122,3696422,3716072,3735972,3755364,3774804,3794484,3814212,3834036,3853908,3873182,3892778,3912466,3932200,3952026,3971298,3990658,4010062,4029554,4049486,4068596,4087874,4107362,4127018,4146758,4166624,4185664,4204984,4224384,4243904,4263544,4283344,4303264,4322416,4341644,4360986,4380366,4399936,4419544,4439266,4459178,4479128,4498208,4517324,4536548,4556096,4575716,4595372,4615100,4634936,4654880,4673852,4692926,4712102,4731652,4751236,4770990,4790880,4809760,4828736,4847808,4867008,4886400,4905856,4925408,4945056,4964736,4984512,5004480,5023350,5042490,5061660,5080890,5100210,5119560,5139000,5158500,5178030,5197620,5217390,5237190,5257080,5276120,5295244,5314452,5333772,5353344,5373056,5392964,5412928,5431492,5450108,5468802,5487600,5506450,5525326,5544280,5563390,5582630,5601896,5621214,5640558,5659954,5679428,5699058,5718844,5738734,5757238,5775814,5794438,5813134,5831926,5850766,5869702,5888686,5907838,5927038,5946310,5965606,5984950,6004366,6023806,6043318,6062950,6082822,6102766,6121092,6139440,6158052,6176708,6195386,6214174,6233094,6252036,6271088,6290228,6309434,6328706,6348044,6367580,6387182,6406828,6426496,6446296,6466206,6484426,6502726,6521186,6539786,6558446,6577146,6595866,6614626,6633406,6652286,6671286,6690346,6709466,6728766,6748086,6767566,6787066,6806786,6826566,6846426,6866346,6886306,6906286,6924304,6942394,6960538,6978772,6997024,7015366,7033834,7052392,7071004,7089724,7108462,7127236,7146028,7164910,7183900,7202908,7222060,7241230,7260454,7279714,7298992,7318360,7337800,7357402,7377220,7397074,7416982,7436962,7454850,7472754,7490690,7508690,7526818,7544962,7563138,7581378,7599666,7618002,7636370,7654834,7673314,7691970,7710674,7729394,7748162,7766962,7785810,7804770,7823778,7842818,7861874,7880978,7900114,7919298,7938578,7957906,7977282,7996770,8016290,8035858,8055522,8075250,8095026,8114834,8132348,8149988,8167698,8185464,8203258,8221094,8238944,8256836,8274882,8293012,8311156,8329412,8347724,8366064,8384488,8403010,8421602,8440208,8458842,8477532,8496264,8515038,8533840,8552656,8571500,8590386,8609328,8628298,8647282,8666308,8685404,8704514,8723694,8742930,8762194,8781556,8800988,8820504,8840034,8859606,8879206,8898820,8918546,8938370,8958222,8978116,8998066,9018058,9035218,9052486,9069802,9087178,9104590,9122038,9139534,9157090,9174718,9192430,9210166,9227938,9245746,9263566,9281554,9299554,9317614,9335722,9353854,9372070,9390310,9408598,9426958,9445354,9463822,9482314,9500842,9519490,9538198,9556918,9575734,9594706,9613702,9632710,9651790,9670906,9690046,9709258,9728506,9747802,9767122,9786490,9805990,9825502,9845038,9864586,9884206,9903994,9923794,9943630,9963502,9983410,10003342,10023310,10043290,10060000,10076730,10093520,10110320,10127170,10144030,10160970,10177920,10194950,10212010,10229170,10246410,10263690,10280990,10298300,10315630,10332970,10350420,10367910,10385460,10403040,10420670,10438310,10455970,10473660,10491360,10509090,10526870,10544660,10562510,10580410,10598320,10616280,10634310,10652370,10670450,10688560,10706710,10724890,10743100,10761390,10779740,10798100,10816480,10834930,10853410,10871910,10890450,10909040,10927670,10946330,10965020,10983820,11002650,11021490,11040380,11059340,11078320,11097330,11116430,11135540,11154700,11173930,11193180,11212440,11231750,11251130,11270530,11289970,11309500,11329050,11348630,11368220,11387830,11407470,11427120,11446830,11466560,11486390,11506330,11522330,11538338,11554362,11570410,11586482,11602562,11618666,11634858,11651058,11667282,11683570,11699882,11716242,11732610,11749002,11765442,11781946,11798458,11814986,11831538,11848146,11864770,11881402,11898106,11914906,11931746,11948610,11965482,11982394,11999314,12016274,12033242,12050250,12067282,12084322,12101402,12118490,12135618,12152770,12169954,12187258,12204602,12221954,12239346,12256770,12274218,12291706,12309266,12326850,12344482,12362162,12379850,12397610,12415394,12433194,12451018,12468866,12486786,12504714,12522682,12540706,12558754,12576818,12594890,12612978,12631162,12649354,12667594,12685858,12704186,12722546,12740930,12759338,12777818,12796362,12814914,12833482,12852074,12870674,12889298,12907946,12926634,12945346,12964106,12982914,13001794,13020682,13039594,13058522,13077522,13096554,13115682,13134826,13153978,13173146,13192338,13211538,13230786,13250050,13269370,13288810,13308290,13327794,13347346,13366954,13386586,13406258,13425978,13445706,13465450,13485218,13505018,13524842,13544706,13564578,13584466,13604410,13624378,13644370,13659376,13674400,13689430,13704490,13719556,13734670,13749820,13764994,13780222,13795462,13810720,13826014,13841314,13856632,13871968,13887322,13902760,13918216,13933714,13949224,13964758,13980322,13995910,14011534,14027212,14042902,14058598,14074306,14090086,14105902,14121736,14137576,14153464,14169370,14185294,14201260,14217256,14233294,14249344,14265484,14281642,14297818,14314012,14330230,14346466,14362714,14378968,14395258,14411566,14427886,14444212,14460556,14476966,14493394,14509828,14526274,14542774,14559280,14575798,14592352,14608912,14625490,14642080,14658748,14675434,14692138,14708854,14725594,14742364,14759230,14776144,14793064,14810002,14826952,14843908,14860876,14877850,14894854,14911900,14928964,14946040,14963140,14980270,14997418,15014626,15031846,15049072,15066316,15083650,15100996,15118366,15135766,15153184,15170620,15188080,15205558,15223072,15240598,15258142,15275692,15293260,15310840,15328438,15346042,15363676,15381316,15399004,15416710,15434476,15452254,15470068,15487924,15505864,15523822,15541840,15559870,15577954,15596062,15614188,15632326,15650482,15668680,15686896,15705130,15723394,15741664,15759964,15778300,15796660,15815050,15833446,15851872,15870322,15888808,15907324,15925912,15944506,15963112,15981742,16000390,16019050,16037734,16056472,16075240,16094026,16112830,16131640,16150468,16169326,16188220,16207120,16226050,16244998,16263964,16282948,16301956,16320982,16340038,16359112,16378192,16397290,16416406,16435540,16454704,16473892,16493152,16512430,16531774,16551124,16570528,16589944,16609384,16628854,16648414,16667998,16687636,16707286,16726942,16746628,16766332,16786042,16805770,16825510,16845304,16865122,16884976,16904884,16924840,16944814,16964794,16978138,16991494,17004870,17018250,17031650,17045054,17058470,17071906,17085370,17098842,17112362,17125886,17139442,17153002,17166582,17180166,17193770,17207414,17221066,17234722,17248386,17262066,17275778,17289502,17303238,17316978,17330742,17344538,17358350,17372170,17386002,17399894,17413790,17427706,17441626,17455558,17469498,17483450,17497414,17511394,17525386,17539386,17553410,17567446,17581498,17595574,17609658,17623770,17637906,17652062,17666266,17680482,17694722,17708974,17723230,17737530,17751846,17766198,17780570,17794954,17809366,17823786,17838210,17852646,17867102,17881574,17896058,17910550,17925054,17939618,17954210,17968822,17983438,17998078,18012738,18027402,18042098,18056798,18071534,18086318,18101138,18115970,18130834,18145734,18160646,18175562,18190514,18205474,18220446,18235422,18250418,18265430,18280462,18295506,18310562,18325634,18340714,18355806,18370902,18386018,18401138,18416282,18431434,18446598,18461774,18476954,18492158,18507370,18522610,18537886,18553170,18568466,18583802,18599146,18614506,18629878,18645258,18660654,18676058,18691490,18706934,18722386,18737866,18753370,18768882,18784398,18799974,18815558,18831190,18846834,18862490,18878170,18893874,18909606,18925350,18941102,18956858,18972622,18988422,19004234,19020070,19035922,19051786,19067658,19083554,19099454,19115378,19131362,19147378,19163398,19179430,19195506,19211610,19227726,19243862,19260022,19276194,19292370,19308554,19324754,19340974,19357206,19373450,19389742,19406062,19422394,19438734,19455090,19471470,19487886,19504322,19520762,19537222,19553686,19570158,19586642,19603166,19619702,19636246,19652818,19669398,19685982,19702574,19719194,19735826,19752482,19769186,19785910,19802646,19819398,19836170,19852946,19869782,19886626,19903482,19920342,19937226,19954118,19971038,19987970,20004970,20021994,20039034,20056086,20073158,20090234,20107318,20124442,20141586,20158746,20175938,20193134,20210350,20227594,20244846,20262102,20279382,20296674,20313998,20331334,20348686,20366046,20383422,20400806,20418202,20435614,20453038,20470474,20487934,20505406,20522886,20540378,20557882,20575402,20592958,20610522,20628126,20645738,20663374,20681014,20698674,20716346,20734022,20751718,20769438,20787162,20804894,20822666,20840450,20858294,20876150,20894014,20911894,20929794,20947718,20965654,20983594,21001590,21019590,21037602,21055622,21073646,21091702,21109782,21127866,21145962,21164078,21182210,21200390,21218594,21236810,21255062,21273326,21291598,21309898,21328210,21346530,21364874,21383234,21401606,21420002,21438406,21456822,21475262,21493714,21512190,21530670,21549182,21567734,21586294,21604858,21623442,21642062,21660698,21679342,21698014,21716694,21735378,21754074,21772814,21791566,21810346,21829138,21847942,21866766,21885602,21904442,21923302,21942166,21961038,21979914,21998834,22017758,22036690,22055634,22074590,22093570,22112562,22131582,22150622,22169686,22188762,22207854,22226954,22246126,22265326,22284550,22303786,22323030,22342286,22361546,22380830,22400126,22419446,22438798,22458154,22477530,22496922,22516358,22535798,22555262,22574738,22594222,22613718,22633250,22652786,22672346,22691918,22711498,22731102,22750722,22770354,22790010,22809674,22829350,22849050,22868762,22888478,22908218,22927982,22947754,22967554,22987366,23007210,23027066,23046926,23066806,23086702,23106634,23126578,23136584,23146592,23156628,23166666,23176726,23186792,23196860,23206938,23217028,23227120,23237218,23247320,23257430,23267562,23277700,23287840,23297990,23308148,23318310,23328478,23338654,23348834,23359026,23369236,23379458,23389700,23399946,23410198,23420456,23430722,23440992,23451264,23461552,23471852,23482154,23492466,23502786,23513116,23523448,23533784,23544126,23554482,23564850,23575240,23585638,23596064,23606492,23616924,23627376,23637832,23648290,23658752,23669228,23679714,23690212,23700712,23711224,23721752,23732282,23742840,23753406,23763994,23774590,23785190,23795796,23806408,23817034,23827664,23838302,23848952,23859608,23870270,23880936,23891622,23902312,23913020,23923730,23934452,23945180,23955912,23966650,23977402,23988172,23998952,24009740,24020538,24031368,24042204,24053050,24063902,24074760,24085620,24096486,24107368,24118256,24129146,24140048,24150956,24161892,24172830,24183778,24194734,24205706,24216684,24227670,24238662,24249664,24260690,24271736,24282792,24293850,24304918,24315988,24327070,24338156,24349248,24360360,24371476,24382594,24393724,24404872,24416030,24427190,24438360,24449532,24460708,24471904,24483116,24494354,24505596,24516846,24528102,24539362,24550634,24561912,24573198,24584496,24595806,24607122,24618442,24629770,24641120,24652472,24663840,24675222,24686614,24698012,24709422,24720844,24732280,24743722,24755168,24766634,24778104,24789586,24801074,24812564,24824060,24835562,24847080,24858606,24870154,24881704,24893282,24904868,24916460,24928056,24939672,24951292,24962924,24974580,24986256,24997936,25009624,25021322,25033022,25044738,25056456,25068186,25079928,25091704,25103482,25115264,25127052,25138852,25150658,25162470,25174290,25186116,25197946,25209778,25221616,25233478,25245344,25257230,25269126,25281028,25292936,25304858,25316784,25328716,25340654,25352594,25364546,25376504,25388472,25400442,25412422,25424408,25436414,25448424,25460460,25472500,25484542,25496590,25508660,25520732,25532828,25544928,25557034,25569142,25581254,25593372,25605514,25617662,25629818,25641978,25654140,25666336,25678538,25690748,25702974,25715212,25727452,25739702,25751954,25764216,25776484,25788760,25801040,25813328,25825628,25837950,25850278,25862620,25874966,25887338,25899714,25912092,25924482,25936882,25949290,25961702,25974122,25986554,25998990,26011440,26023896,26036368,26048846,26061332,26073822,26086318,26098820,26111330,26123846,26136372,26148910,26161450,26173996,26186548,26199116,26211692,26224274,26236862,26249462,26262072,26274684,26287302,26299938,26312578,26325224,26337876,26350534,26363204,26375892,26388588,26401290,26414002,26426722,26439460,26452202,26464958,26477720,26490500,26503290,26516088,26528896,26541716,26554538,26567366,26580206,26593058,26605946,26618838,26631736,26644642,26657552,26670468,26683386,26696308,26709248,26722200,26735158,26748124,26761096,26774074,26787056,26800056,26813058,26826064,26839072,26852104,26865140,26878182,26891230,26904292,26917384,26930482,26943584,26956692,26969812,26982938,26996084,27009234,27022392,27035554,27048724,27061900,27075082,27088268,27101484,27114702,27127930,27141170,27154418,27167676,27180942,27194232,27207528,27220836,27234148,27247474,27260804,27274140,27287478,27300844,27314224,27327620,27341018,27354428,27367844,27381264,27394704,27408154,27421610,27435072,27448540,27462016,27475502,27489000,27502512,27516034,27529570,27543122,27556688,27570264,27583854,27597450,27611062,27624680,27638306,27651938,27665586,27679254,27692932,27706612,27720298,27733988,27747680,27761376,27775084,27788794,27802514,27816236,27829964,27843714,27857470,27871228,27884990,27898770,27912558,27926356,27940162,27953990,27967820,27981660,27995518,28009390,28023266,28037144,28051026,28064926,28078828,28092734,28106646,28120566,28134496,28148428,28162390,28176356,28190352,28204350,28218358,28232368,28246396,28260428,28274478,28288534,28302604,28316684,28330766,28344852,28358958,28373100,28387248,28401400,28415558,28429730,28443906,28458102,28472308,28486528,28500770,28515018,28529268,28543548,28557840,28572142,28586462,28600784,28615110,28629450,28643796,28658164,28672550,28686938,28701338,28715744,28730154,28744572,28758994,28773424,28787860,28802306,28816754,28831214,28845692,28860180,28874682,28889200,28903732,28918268,28932810,28947358,28961908,28976464,28991024,29005586,29020176,29034768,29049388,29064014,29078642,29093274,29107912,29122564,29137220,29151888,29166570,29181268,29195980,29210696,29225418,29240148,29254884,29269624,29284370,29299122,29313880,29328646,29343416,29358194,29372976,29387772,29402584,29417404,29432230,29447060,29461902,29476752,29491618,29506486,29521364,29536250,29551140,29566036,29580958,29595886,29610824,29625770,29640720,29655676,29670644,29685626,29700638,29715654,29730684,29745736,29760796,29775868,29790944,29806026,29821116,29836216,29851322,29866442,29881572,29896708,29911846,29926994,29942154,29957326,29972512,29987704,30002902,30018118,30033344,30048576,30063816,30079074,30094336,30109604,30124874,30140150,30155436,30170724,30186022,30201328,30216640,30231958,30247286,30262616,30277964,30293322,30308682,30324054,30339430,30354812,30370202,30385602,30401014,30416440,30431878,30447320,30462770,30478230,30493696,30509168,30524660,30540156,30555666,30571192,30586732,30602282,30617840,30633408,30648988,30664570,30680170,30695776,30711394,30727022,30742662,30758304,30773950,30789598,30805258,30820924,30836594,30852272,30867954,30883680,30899410,30915142,30930878,30946616,30962364,30978124,30993890,31009662,31025448,31041238,31057034,31072836,31088644,31104460,31120282,31136140,31152016,31167896,31183782,31199670,31215570,31231476,31247388,31263306,31279228,31295164,31311122,31327092,31343064,31359054,31375054,31391060,31407092,31423148,31439208,31455270,31471336,31487404,31503476,31519562,31535652,31551748,31567850,31583960,31600086,31616224,31632364,31648546,31664732,31680920,31697112,31713328,31729550,31745778,31762008,31778256,31794508,31810774,31827046,31843346,31859664,31875996,31892334,31908682,31925042,31941404,31957772,31974152,31990562,32006978,32023398,32039824,32056256,32072702,32089152,32105604,32122080,32138560,32155046,32171538,32188056,32204584,32221130,32237682,32254242,32270808,32287380,32303982,32320588,32337206,32353836,32370468,32387116,32403766,32420422,32437082,32453754,32470444,32487136,32503834,32520536,32537264,32554004,32570750,32587508,32604270,32621056,32637866,32654688,32671516,32688346,32705188,32722058,32738936,32755818,32772706,32789606,32806508,32823428,32840354,32857284,32874220,32891162,32908124,32925102,32942082,32959068,32976060,32993070,33010090,33027116,33044144,33061176,33078216,33095262,33112314,33129390,33146482,33163580,33180686,33197802,33214924,33232060,33249218,33266384,33283566,33300754,33317944,33335146,33352352,33369560,33386790,33404028,33421284,33438574,33455866,33473164,33490480,33507800,33525126,33542458,33559798,33577148,33594506,33611882,33629264,33646650,33664038,33681430,33698830,33716246,33733664,33751094,33768536,33785984,33803450,33820920,33838396,33855878,33873366,33890856,33908352,33925860,33943378,33960916,33978466,33996034,34013606,34031184,34048764,34066360,34083958,34101566,34119188,34136814,34154470,34172128,34189796,34207476,34225158,34242864,34260576,34278304,34296040,34313786,34331534,34349294,34367076,34384864,34402654,34420460,34438286,34456122,34473960,34491810,34509672,34527552,34545442,34563344,34581252,34599162,34617082,34635004,34652932,34670870,34688826,34706784,34724754,34742730,34760710,34778696,34796684,34814696,34832736,34850778,34868824,34886872,34904930,34922990,34941066,34959154,34977250,34995368,35013488,35031614,35049744,35067876,35086018,35104166,35122334,35140514,35158704,35176902,35195112,35213328,35231550,35249778,35268010,35286260,35304512,35322768,35341036,35359322,35377610,35395910,35414216,35432526,35450838,35469166,35487506,35505858,35524224,35542594,35560972,35579368,35597768,35616180,35634606,35653038,35671476,35689918,35708368,35726824,35745284,35763764,35782256,35800758,35819274,35837794,35856316,35874854,35893394,35911946,35930528,35949114,35967706,35986322,36004958,36023618,36042288,36060966,36079656,36098356,36117068,36135786,36154516,36173258,36192006,36210762,36229534,36248320,36267112,36285908,36304710,36323548,36342406,36361274,36380172,36399082,36417994,36436910,36455828,36474774,36493732,36512704,36531682,36550682,36569690,36588702,36607732,36626768,36645818,36664886,36683958,36703036,36722116,36741202,36760322,36779460,36798600,36817756,36836918,36856098,36875280,36894486,36913696,36932908,36952126,36971356,36990592,37009840,37029098,37048364,37067636,37086924,37106224,37125532,37144850,37164182,37183554,37202932,37222312,37241698,37261088,37280490,37299906,37319326,37338748,37358174,37377602,37397034,37416474,37435920,37455376,37474838,37494306,37513776,37533252,37552734,37572222,37591722,37611228,37630758,37650298,37669840,37689392,37708950,37728520,37748096,37767678,37787274,37806876,37826484,37846144,37865824,37885510,37905206,37924904,37944612,37964328,37984054,38003792,38023542,38043294,38063052,38082814,38102590,38122382,38142182,38161994,38181812,38201652,38221494,38241346,38261206,38281072,38300960,38320850,38340762,38360680,38380606,38400542,38420490,38440450,38460412,38480384,38500362,38520352,38540344,38560340,0};
int Sum[40000005],pri[20005],tot,bel[20005];
bool vis[20005];
int del[2505],fac[2505];
inline int pw(int x,int y){
    int ans=1,tmp=x;
    while(y){
        if(y&1)ans=1ll*ans*tmp%p;
        tmp=1ll*tmp*tmp%p;
        y>>=1;
    }
    return ans;
}
inline void sf(int n){
    for(int i=2;i<=n;i++){
        if(!vis[i]){
            pri[++tot]=i;
            bel[i]=tot;
        }
        for(int j=1;j<=tot&&pri[j]*i<=n;j++){
            vis[i*pri[j]]=1;
            if(i%pri[j]==0)break;
        }
    }
}
inline long long celc(int x,int y){
    if(!y)return 1;
    return Sum[len[x-1]+y];
}
inline int G(int now){
    int ans=1;
    for(int i=1;i<=tot;i++){
        ans=1ll*ans*celc(i,(now+1)*fac[i]-2*del[i])%p;
    }
    return ans;
}
signed main(){
    freopen("gonna.in","r",stdin);
    freopen("gonna.out","w",stdout);
    n=read(),p=read();
    sf(n);
    long long ans=0;
    for(int i=1;i<=tot;i++){
        Sum[len[i-1]+1]=pri[i]+1;
        int x=1ll*pri[i]*pri[i];
        for(int j=len[i-1]+2;j<=len[i];j++){
            Sum[j]=(Sum[j-1]+x)%p;
            x=1ll*x*pri[i]%p;
        }
    }
    for(int i=1;i<=n;i++){
        int x=i;
        for(int j=1;pri[j]*pri[j]<=x;j++){
            while(x%pri[j]==0){
                x/=pri[j];
                fac[j]++;
            }
        }
        if(x!=1){
            fac[bel[x]]++;
        }
        for(int j=1;j<=tot;j++)del[j]+=fac[j];
        ans=(ans+G(i))%p;
    }
    
    printf("%lld\n",ans);
}